"use strict";(self["webpackChunkneurostate_cabinet"]=self["webpackChunkneurostate_cabinet"]||[]).push([[105],{3899:function(e,o,t){t.r(o),t.d(o,{default:function(){return F}});t(7658);var s=t(3396),r=t(7139),l=t.p+"img/google.b2539a72.svg",i=t.p+"img/facebook.5defcc00.svg";const a=e=>((0,s.dD)("data-v-5316b0b4"),e=e(),(0,s.Cn)(),e),n={class:"register"},u={action:"",class:"form"},m={class:"register-title"},c={class:"sponsor-email"},d={class:"register-from-socail-networks"},p={class:"register-from-socail-networks__buttons"},g=a((()=>(0,s._)("img",{src:l,alt:"google"},null,-1))),h=[g],_=a((()=>(0,s._)("button",{class:"register-from-socail-networks__button"},[(0,s._)("img",{src:i,alt:"facebook",type:"button"})],-1))),$={class:"have-account"};function b(e,o,t,l,i,a){const g=(0,s.up)("CustomInput");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("form",u,[(0,s._)("h2",m,(0,r.zw)(e.$localizeFilter("register")),1),(0,s.Wm)(g,{modelValue:e.fullName,errors:e.v$.fullName.$errors,title:"*"+e.$localizeFilter("full_name")+":","onUpdate:modelValue":o[0]||(o[0]=o=>{e.fullName=o,e.v$.fullName.$touch()})},null,8,["modelValue","errors","title"]),(0,s.Wm)(g,{modelValue:e.email,errors:e.v$.email.$errors,title:"*"+e.$localizeFilter("your_email"),"onUpdate:modelValue":o[1]||(o[1]=o=>{e.email=o,e.v$.email.$touch()})},null,8,["modelValue","errors","title"]),(0,s.Wm)(g,{modelValue:e.messengerLink,errors:e.v$.messengerLink.$errors,title:e.$localizeFilter("link_to_social_networks")+":","onUpdate:modelValue":o[2]||(o[2]=o=>{e.messengerLink=o,e.v$.messengerLink.$touch()})},null,8,["modelValue","errors","title"]),(0,s.Wm)(g,{modelValue:e.phoneNumber,errors:e.v$.phoneNumber.$errors,isPhone:!0,title:e.$localizeFilter("phone_number")+":","onUpdate:modelValue":o[3]||(o[3]=o=>{e.phoneNumber=o,e.v$.phoneNumber.$touch()})},null,8,["modelValue","errors","title"]),(0,s.Wm)(g,{modelValue:e.password,errors:e.v$.password.$errors,isPassword:!0,title:"*"+e.$localizeFilter("your_password"),"onUpdate:modelValue":o[4]||(o[4]=o=>{e.password=o,e.v$.password.$touch()})},null,8,["modelValue","errors","title"]),(0,s.Wm)(g,{modelValue:e.passwordAgain,errors:e.v$.passwordAgain.$errors,isPassword:!0,title:"*"+e.$localizeFilter("your_password_again")+":","onUpdate:modelValue":o[5]||(o[5]=o=>{e.passwordAgain=o,e.v$.passwordAgain.$touch()})},null,8,["modelValue","errors","title"]),(0,s._)("div",c,(0,r.zw)(e.$localizeFilter("sponsor_email",[e.sponsorEmail])),1),(0,s._)("div",d,[(0,s._)("p",null,(0,r.zw)(e.$localizeFilter("register_from_socail_networks")),1),(0,s._)("div",p,[(0,s._)("button",{class:"register-from-socail-networks__button",onClick:o[6]||(o[6]=(...o)=>e.googleAuth&&e.googleAuth(...o)),type:"button"},h),_])]),(0,s._)("button",{class:"button register-button",id:"submitButton",type:"button",onClick:o[7]||(o[7]=(...o)=>e.submitHandler&&e.submitHandler(...o))},(0,r.zw)(e.$localizeFilter("register_2")),1),(0,s._)("p",$,(0,r.zw)(e.$localizeFilter("have_account")),1),(0,s._)("button",{class:"login",type:"button",onClick:o[8]||(o[8]=o=>e.$router.push("/login"))},(0,r.zw)(e.$localizeFilter("login")),1)])])}var w=t(3053),f=t(9117),v=t(7389),k=t(9849),z=t(2848),V=(t(6070),(0,v.aZ)({components:{CustomInput:z.Z},data(){return{fullName:"",email:"",messengerLink:"",phoneNumber:"",password:"",passwordAgain:"",sponsorEmail:"official@neuro-state.com"}},setup(){return{v$:(0,w.ZP)()}},validations(){return{email:{required:f.BM.withMessage((0,k.Z)("field_must_not_be_empty"),f.C1),email:f.BM.withMessage((0,k.Z)("field_must_be_valid_email_address"),f.Do)},password:{required:f.BM.withMessage((0,k.Z)("field_must_not_be_empty"),f.C1)},fullName:{required:f.BM.withMessage((0,k.Z)("field_must_not_be_empty"),f.C1)},messengerLink:{},phoneNumber:{},passwordAgain:{required:f.BM.withMessage((0,k.Z)("error_password_again"),(0,f.sH)(this.password))}}},methods:{googleAuth(){location.href=location.origin+"/auth/google?sponsorEmail="+this.sponsorEmail},async submitHandler(){if(this.v$.$touch(),this.v$.$error)return;const e=document.getElementById("submitButton");e.classList.add("button--loading");const o={fullName:this.fullName,email:this.email,password:this.password,phoneNumber:this.phoneNumber,sponsorEmail:this.sponsorEmail,messengerLink:this.messengerLink};try{await this.$store.dispatch("register",o),await this.$store.dispatch("login",o),this.$gtag.event("register",{method:"Google"});const{scope:t,email:s}=await this.$store.dispatch("getProfile");setTimeout((()=>{e.classList.remove("button--loading"),"not_activated_client"==t?this.$router.push("/confirmEmail?email="+s):this.$router.push("/cabinet")}),1e3)}catch(t){setTimeout((()=>{this.$error(t),e.classList.remove("button--loading"),this.buttonKey+=1}),1e3)}}},async mounted(){if(localStorage.getItem("sponsorReferralToken"))try{let{email:e}=await this.$store.dispatch("getEmailByReferralToken",localStorage.getItem("sponsorReferralToken"));this.sponsorEmail=e||"official@neuro-state.com"}catch(e){this.$error(e),this.sponsorEmail="official@neuro-state.com"}}})),y=t(89);const N=(0,y.Z)(V,[["render",b],["__scopeId","data-v-5316b0b4"]]);var F=N}}]);