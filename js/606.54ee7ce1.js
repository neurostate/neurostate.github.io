"use strict";(self["webpackChunkneurostate_cabinet"]=self["webpackChunkneurostate_cabinet"]||[]).push([[606],{1921:function(t,l,e){e.r(l),e.d(l,{default:function(){return Mt}});var o=e(3396),n=e(7139),s=e(7650);const i=t=>((0,o.dD)("data-v-728bea09"),t=t(),(0,o.Cn)(),t),a={class:"nft-bonuses"},r={class:"header-wrap"},c={class:"header_left"},d={class:"title"},u={class:"id-wrap"},h={class:"id-title"},p={class:"id-data"},w=i((()=>(0,o._)("div",{class:"header_right"},[(0,o._)("div",{class:"btns-wrap"})],-1))),g={class:"collection-title-block"},f={class:"all"},C={class:"my-button"},y={class:"buttons-wrap"},m=i((()=>(0,o._)("img",{src:s,alt:""},null,-1))),_=[m];function v(t,l,e,s,i,m){const v=(0,o.up)("LotterySpinning"),b=(0,o.up)("router-link"),M=(0,o.up)("NFTBonusesDesktop"),S=(0,o.up)("NFTBonusesTablet"),k=(0,o.up)("pagination"),$=(0,o.up)("CongratulationModal"),I=(0,o.up)("LotteryInfoModal"),x=(0,o.up)("FullCollectionInfoModal");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o._)("div",r,[(0,o._)("div",c,[(0,o._)("div",d,(0,n.zw)(t.$localizeFilter("nft_bonus_btn")),1),(0,o._)("div",u,[(0,o._)("span",h,(0,n.zw)(t.$localizeFilter("your_id")),1),(0,o._)("span",p,(0,n.zw)(" "+t.profile?.id||0),1)])]),w]),t.notCollected.length>0?((0,o.wg)(),(0,o.j4)(v,{key:0,ref:"lotterySpinningRef",id:"lotterySpinningId",onShowLotteryInfoModal:l[0]||(l[0]=l=>t.showLotteryInfoModal=!0),onShowCongratulationModal:t.showCongratulationModal2,notCollected:t.notCollected,trialsCountOverride:t.trialsCount,onUpdateNotCollected:t.updateNotCollected},null,8,["onShowCongratulationModal","notCollected","trialsCountOverride","onUpdateNotCollected"])):(0,o.kq)("",!0),(0,o._)("div",g,[(0,o._)("p",f,(0,n.zw)(t.$localizeFilter("all_collections_title")),1),(0,o._)("button",C,[(0,o.Wm)(b,{to:"/myNFTBonuses"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.$localizeFilter("my_collections_title")),1)])),_:1})])]),(0,o.Wm)(M,{collections:t.collections,class:"desktop",onShowFullCollectionInfoModal:t.openFullCollectionInfoModal},null,8,["collections","onShowFullCollectionInfoModal"]),(0,o.Wm)(S,{collections:t.collections,class:"tablet",onShowFullCollectionInfoModal:t.openFullCollectionInfoModal},null,8,["collections","onShowFullCollectionInfoModal"]),(0,o._)("div",y,[(0,o.Wm)(k,{modelValue:t.page,"onUpdate:modelValue":l[1]||(l[1]=l=>t.page=l),records:t.count,"per-page":t.pageSize},null,8,["modelValue","records","per-page"]),t.notCollected.length>0?((0,o.wg)(),(0,o.iD)("button",{key:0,class:"button",onClick:l[2]||(l[2]=l=>t.scrollToTop())},(0,n.zw)(t.$localizeFilter("go_to_nft_btn")),1)):(0,o.kq)("",!0)]),(0,o._)("button",{class:"leave-session",onClick:l[3]||(l[3]=l=>t.logout())},(0,n.zw)(t.$localizeFilter("leave_session")),1),(0,o._)("div",{class:"scroll-up-btn",onClick:l[4]||(l[4]=l=>t.scrollUp())},_),t.showCongratulationModal?((0,o.wg)(),(0,o.j4)($,{key:1,collections:t.collections,winSlot:t.winSlot,onCloseModal:t.closeModals},null,8,["collections","winSlot","onCloseModal"])):(0,o.kq)("",!0),t.showLotteryInfoModal?((0,o.wg)(),(0,o.j4)(I,{key:2,onCloseModal:t.closeModals},null,8,["onCloseModal"])):(0,o.kq)("",!0),t.showFullCollectionInfoModal?((0,o.wg)(),(0,o.j4)(x,{key:3,reward:t.selectedCollectionReward,onCloseModal:t.closeModals},null,8,["reward","onCloseModal"])):(0,o.kq)("",!0)])}e(7658);var b=e(7389),M=e(4451);const S=t=>((0,o.dD)("data-v-6bd7afe6"),t=t(),(0,o.Cn)(),t),k={class:"wrapper"},$={class:"title"},I={key:0,class:"roulette-wrapper"},x={ref:"wheel",class:"wheel"},F=["src"],z=["src"],D={class:"attempts"},L=S((()=>(0,o._)("img",{src:M,alt:""},null,-1))),q=[L],N=S((()=>(0,o._)("input",{style:{visibility:"hidden"},placeholder:"outcome"},null,-1)));function T(t,l,e,s,i,a){return(0,o.wg)(),(0,o.iD)("div",k,[(0,o._)("h3",$,(0,n.zw)(t.$localizeFilter("try_your_luck")),1),t.notCollected.length>0?((0,o.wg)(),(0,o.iD)("div",I,[(0,o._)("div",x,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.totalRows,((l,e)=>((0,o.wg)(),(0,o.iD)("div",{class:"row",key:e},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.notCollected,((t,l)=>((0,o.wg)(),(0,o.iD)("div",{class:"card",key:l},[(0,o._)("img",{class:"img",src:t.previewLink,alt:""},null,8,F)])))),128)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.notCollected,((t,l)=>((0,o.wg)(),(0,o.iD)("div",{class:"card",key:l},[(0,o._)("img",{class:"img",src:t.previewLink,alt:""},null,8,z)])))),128))])))),128))],512)])):(0,o.kq)("",!0),(0,o._)("p",D,[(0,o._)("button",{onClick:l[0]||(l[0]=l=>t.$emit("showLotteryInfoModal"))},q),(0,o.Uk)(" "+(0,n.zw)(t.$localizeFilter("attempts")+": "+t.trialsCount),1)]),(0,o._)("div",null,[N,((0,o.wg)(),(0,o.iD)("button",{class:(0,n.C_)(0===t.trialsCount?"button button-disabled":"button"),onClickOnce:l[1]||(l[1]=l=>t.startSpin()),key:t.buttonKey},(0,n.zw)(t.$localizeFilter("go_to_nft_btn")),35))])])}async function R(t=0){return new Promise(((l,e)=>{setTimeout((()=>{l(null)}),t)}))}var E=(0,b.aZ)({name:"LotterySpinning",props:{notCollected:{type:Array,default:()=>[]},trialsCountOverride:{type:Number,default:0}},data(){return{trialsCount:0,totalRows:15,items:[],buttonKey:0,cards:0,interval:null,latestPosition:null}},watch:{trialsCountOverride:function(t){this.trialsCount=t}},computed:{},methods:{transformCards(){let t=document.querySelector(".roulette-wrapper").offsetWidth,l=document.querySelector(".roulette-wrapper").getBoundingClientRect(),e=t/2+l.x,o=document.querySelectorAll(".card");o.forEach((t=>{let l=t.getBoundingClientRect().x+t.offsetWidth/2,o=Math.abs(l-e);o<110&&(t.style.transform=`scale(${1+(110-o)/400})`,t.style.marginLeft=23+(110-o)/4+"px",t.style.marginRight=40+(110-o)/4+"px")}))},async startSpin(){if(this.trialsCount>0){const l=await this.$store.dispatch("spinNFTWheel")||"";var t=null;let e=this.notCollected.find((t=>t.nftId===l.nftId));console.log("check",e,l,this.notCollected),void 0===e&&this.$emit("updateNotCollected",l,this.latestPosition),await R(500),this.notCollected.forEach(((e,o)=>{e.nftId===l.nftId&&(t=o+1)})),this.spinWheel(t,l),this.interval=setInterval((()=>{let t=document.querySelector(".roulette-wrapper").offsetWidth,l=document.querySelector(".roulette-wrapper").getBoundingClientRect(),e=t/2+l.x,o=document.querySelectorAll(".card");o.forEach((t=>{let l=t.getBoundingClientRect().x+t.offsetWidth/2,o=Math.abs(l-e);o<110?(t.style.transform=`scale(${1+(110-o)/400})`,t.style.marginLeft=20+(110-o)/4+"px",t.style.marginRight=20+(110-o)/4+"px"):(t.style.transform="scale(1)",t.style.marginLeft="20px",t.style.marginRight="20px")}))}),16),this.trialsCount--}},hideShadow(){let t=document.querySelectorAll(".card");t.forEach((t=>{t.firstChild.style.boxShadow="none"}))},spinWheel(t,l){var e=document.querySelector(".roulette-wrapper .wheel");let o=[];for(let p=1;p<=this.notCollected.length;p++)o.push(p);let n=o.indexOf(t);this.latestPosition=n;const s=186,i=20,a=20,r=20;var c=7,d=s+2*i,u=c*this.notCollected.length*d+n*d+a+r;let h;e.style.transitionTimingFunction="cubic-bezier(0,0.12,0.14,1)",e.style.transitionDuration="6s",e.style.transform="translate3d(-"+(u-24)+"px, 0px, 0px)",this.$refs.wheel.addEventListener("transitionend",h=async()=>{this.$refs.wheel.removeEventListener("transitionend",h),e.style.transition="all 0.5s ease-in-out",e.style.transform="translate3d(-"+(u-r-33)+"px, 0px, 0px)",await R(300),clearInterval(this.interval),this.interval=null,e.style.transitionDuration="",e.style.transition="";var t=-n*d-r;e.style.transform="translate3d("+(t+24)+"px, 0px, 0px)",this.buttonKey++;let o=document.querySelector(".roulette-wrapper").offsetWidth,s=document.querySelector(".roulette-wrapper").getBoundingClientRect(),i=o/2+s.x,a=document.querySelectorAll(".card");a.forEach((t=>{let l=t.getBoundingClientRect().x+t.offsetWidth/2,e=Math.abs(l-i);e<110?(t.style.transform=`scale(${1+(110-e)/400})`,t.style.marginLeft=23+(110-e)/4+"px",t.style.marginRight=23+(110-e)/4+"px",t.firstChild.style.boxShadow="0px 0px 20px #78ECE3"):(t.style.transform="scale(1)",t.style.marginLeft="20px",t.style.marginRight="20px")})),await R(1e3),this.$emit("showCongratulationModal",l)})}},mounted(){this.trialsCount=this.trialsCountOverride,this.notCollected.length>0&&this.transformCards()}}),W=e(89);const B=(0,W.Z)(E,[["render",T],["__scopeId","data-v-6bd7afe6"]]);var O=B,Z=e(8968),A=e(4682),P=e(3356);const U=t=>((0,o.dD)("data-v-746e3bec"),t=t(),(0,o.Cn)(),t),K={class:"wrapper"},j={class:"modal-container"},V={class:"modal-content"},Y=U((()=>(0,o._)("img",{src:P,alt:""},null,-1))),H=[Y],J={class:"content-wrap"},G={class:"modal-title"},Q={class:"modal-text"},X=["src"],tt={class:"info-wrap"},lt={class:"info-text"},et={class:"info-text"};function ot(t,l,e,s,i,a){return(0,o.wg)(),(0,o.iD)("div",K,[(0,o._)("div",{class:"blur",onClick:l[0]||(l[0]=l=>t.$emit("closeModal"))}),(0,o._)("div",j,[(0,o._)("div",V,[(0,o._)("button",{class:"close-button",onClick:l[1]||(l[1]=l=>t.$emit("closeModal"))},H),(0,o._)("div",J,[(0,o._)("h3",G,(0,n.zw)(t.$localizeFilter("congratulations")),1),(0,o._)("p",Q,(0,n.zw)(t.$localizeFilter("your_prize")+'"'+t.winSlotCollectionName+'"'),1),(0,o._)("img",{src:t.winSlot.previewLink||"",alt:"",class:"prize-img"},null,8,X),(0,o._)("div",tt,[(0,o._)("p",lt,(0,n.zw)(t.$localizeFilter("your_prize_sent")+" "+(t.profile?.email||"")),1),(0,o._)("p",et,(0,n.zw)(t.$localizeFilter("your_progress_displayed")),1)])])])])])}e(9849);var nt=(0,b.aZ)({props:{winSlot:{type:Object},collections:{type:Array}},computed:{winSlotCollectionName(){let t="";return this.collections.forEach((l=>{l.collectionId===this.winSlot.collectionId&&(t+=l.name+" "),l.items.forEach((e=>{e.nftId===this.winSlot.nftId&&(t+=e.numberInCollection+"/"+l.total)}))})),t},profile(){return this.$store.state.profile}},async mounted(){try{await this.$store.dispatch("getProfile")}catch(t){console.log(t)}}});const st=(0,W.Z)(nt,[["render",ot],["__scopeId","data-v-746e3bec"]]);var it=st;const at=t=>((0,o.dD)("data-v-3da27001"),t=t(),(0,o.Cn)(),t),rt={class:"wrapper"},ct={class:"modal-container"},dt={class:"modal-content"},ut=at((()=>(0,o._)("img",{src:P,alt:""},null,-1))),ht=[ut],pt={class:"content-wrap"},wt={class:"modal-text"};function gt(t,l,e,s,i,a){return(0,o.wg)(),(0,o.iD)("div",rt,[(0,o._)("div",{class:"blur",onClick:l[0]||(l[0]=l=>t.$emit("closeModal"))}),(0,o._)("div",ct,[(0,o._)("div",dt,[(0,o._)("button",{class:"close-button",onClick:l[1]||(l[1]=l=>t.$emit("closeModal"))},ht),(0,o._)("div",pt,[(0,o._)("p",wt,(0,n.zw)(t.$localizeFilter("lottery_info_text")),1)])])])])}var ft=(0,b.aZ)({computed:{profile(){return this.$store.state.profile}},async mounted(){try{await this.$store.dispatch("getProfile")}catch(t){console.log(t)}}});const Ct=(0,W.Z)(ft,[["render",gt],["__scopeId","data-v-3da27001"]]);var yt=Ct,mt=e(8845),_t=e(4268);var vt=(0,b.aZ)({name:"NFTBonuses",mixins:[_t.Z],components:{LotterySpinning:O,NFTBonusesDesktop:Z.Z,NFTBonusesTablet:A.Z,CongratulationModal:it,LotteryInfoModal:yt,FullCollectionInfoModal:mt.Z},data(){return{collections:[],notCollected:[],trialsCount:0,winSlot:{},count:0,showCongratulationModal:!1,showLotteryInfoModal:!1,showFullCollectionInfoModal:!1,selectedCollectionReward:{}}},watch:{page(){this.$nextTick((()=>{this.loadData()}))}},computed:{profile(){return this.$store.getters.profile},referralsCounts(){let t=[],l=0;for(let e of this.list)t.push({from:l+1,to:l+e.length}),l+=e.length;return t}},created(){window.addEventListener("scroll",this.handleScroll)},unmounted(){window.removeEventListener("scroll",this.handleScroll)},methods:{scrollToTop(){let t=document.getElementById("lotterySpinningId");t.scrollIntoView({behavior:"smooth"})},async getNotCollected(t=null,l=null){let e=[];if(t){e=JSON.parse(JSON.stringify(this.notCollected)),e=e.slice(0,29);let l=e.length/2;e.splice(l,0,t)}else try{e=await this.$store.dispatch("getNftWheelOptions")}catch(o){console.log(o)}this.notCollected=e},updateNotCollected(t,l){this.getNotCollected(t,l)},showCongratulationModal2(t){this.winSlot=t,this.showCongratulationModal=!0},openFullCollectionInfoModal(t){this.selectedCollectionReward=t,this.showFullCollectionInfoModal=!0},closeModals(){this.showCongratulationModal&&this.reloadData(),this.showCongratulationModal=!1,this.showLotteryInfoModal=!1,this.showFullCollectionInfoModal=!1},handleScroll(t){window.pageYOffset>100?document.querySelector(".scroll-up-btn").style.display="block":document.querySelector(".scroll-up-btn").style.display="none"},scrollUp(){window.scrollTo({top:0,behavior:"smooth"})},openTable(t){const l=document.querySelectorAll(".table")[t];l.classList.toggle("open");const e=document.querySelectorAll(".open-list")[t];e.classList.toggle("arrow-up")},async logout(){try{await this.$store.dispatch("logout")}catch(t){console.log(t)}finally{location.href=`${location.origin}/`}},async reloadData(){this.notCollected=[],this.loadData(!0)},async loadData(t=!1){try{const l={skip:this.skip,limit:this.limit,filter:"all"},e=await this.$store.dispatch("getCollections",l),{count:o}=await this.$store.dispatch("getCollectionsCount",l);this.count=o,this.trialsCount=e.trialsCount,this.collections=e.collections,this.setupPagination(this.collections,this.count),t&&this.getNotCollected()}catch(l){this.$error(l)}}},async mounted(){try{await this.loadData(!0),await this.$store.dispatch("getProfile"),await this.$store.dispatch("getCollectionsCount")}catch(t){console.log(t)}}});const bt=(0,W.Z)(vt,[["render",v],["__scopeId","data-v-728bea09"]]);var Mt=bt}}]);