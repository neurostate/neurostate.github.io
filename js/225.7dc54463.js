"use strict";(self["webpackChunkneurostate_cabinet"]=self["webpackChunkneurostate_cabinet"]||[]).push([[225],{6225:function(e,t,i){i.r(t),i.d(t,{default:function(){return se}});var s=i(3396),n=i(7139),l=i(9242),o=i(8900);const a={class:"new-nft-deal"},c={class:"container"},d={class:"title"},r={class:"your-id"},h={for:"",class:"id-recipent-label"},p={class:"deal-wrapper"},m={class:"want"},w={class:"want-title"},u={class:"text"},g=["onClick"],_=["id"],x=["onUpdate:modelValue"],I={key:0,class:"dropdown"},f=["onClick"],y={class:"dropdown-img"},D=["src"],N={class:"NFT-info"},b={key:0,class:"exchange-hide text",for:""},k={class:"expect"},F={class:"expect-title"},v={class:"text"},C=["onClick"],T=["id"],$=["onUpdate:modelValue"],L={key:0,class:"dropdown"},z=["onClick"],A={class:"dropdown-img"},M=["src"],R={class:"NFT-info"},U={key:0,class:"expected-hide text",for:""};function q(e,t,i,q,V,B){const E=(0,s.up)("NewDealCreatedModal");return(0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",c,[(0,s._)("h3",d,(0,n.zw)(e.$localizeFilter("new_deal")),1),(0,s._)("div",r,[(0,s.Uk)((0,n.zw)(e.$localizeFilter("your_id"))+" ",1),(0,s._)("span",null,(0,n.zw)(" "+e.profile?.id||0),1)]),(0,s._)("p",h,(0,n.zw)(e.$localizeFilter("new_deal_recipient_id"))+": ",1),(0,s.wy)((0,s._)("input",{onChange:t[0]||(t[0]=t=>e.sendRequest(e.recipientId)),"onUpdate:modelValue":t[1]||(t[1]=t=>e.recipientId=t),type:"text",class:"input id-recipent"},null,544),[[l.nr,e.recipientId]]),(0,s._)("div",p,[(0,s._)("div",m,[(0,s._)("h4",w,(0,n.zw)(e.$localizeFilter("new_deal_want_label"))+": ",1),(0,s._)("p",u,(0,n.zw)(e.$localizeFilter("item_for_exchange_want"))+":",1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.exchangeNFTItems,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{class:"input-wrapper1",key:i},[(0,s._)("button",{class:"dropdown-btn",onClick:s=>e.triggerDropdownLeft(i,!t.showDropdown),type:"button"},[(0,s._)("img",{class:"dropdown-btn-img",id:"dropdown-btn-img-"+i,src:o,alt:""},null,8,_)],8,g),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e=>t.displayedName=e,readonly:"",class:"input item-swap"},null,8,x),[[l.nr,t.displayedName]]),t.showDropdown&&e.visibleItemsListLeft.length>0?((0,s.wg)(),(0,s.iD)("ul",I,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.visibleItemsListLeft,((t,l)=>((0,s.wg)(),(0,s.iD)("li",{onClick:s=>e.selectItemLeft(t,i),class:"dropdown-item",key:l},[(0,s._)("div",y,[(0,s._)("img",{src:t.previewLink,alt:""},null,8,D)]),(0,s._)("div",N,(0,n.zw)(e.$localizeFilter("new_deal_collection_title")+' "'+t.name+'" №'+t.numberInCollection),1)],8,f)))),128))])):(0,s.kq)("",!0)])))),128)),e.expectedAmount?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",b,(0,n.zw)(e.$localizeFilter("new_deal_add_NSC_want"))+": ",1)),e.expectedAmount?(0,s.kq)("",!0):(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:1,"onUpdate:modelValue":t[2]||(t[2]=t=>e.exchangeAmount=t),type:"text",class:"exchange-hide input usdt"},null,512)),[[l.nr,e.exchangeAmount]])]),(0,s._)("div",k,[(0,s._)("h4",F,(0,n.zw)(e.$localizeFilter("new_deal_expect_label"))+": ",1),(0,s._)("p",v,(0,n.zw)(e.$localizeFilter("item_for_exchange_expect"))+" :",1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.expectedNFTItems,((t,i)=>((0,s.wg)(),(0,s.iD)("div",{class:"input-wrapper2",key:i},[(0,s._)("button",{class:"dropdown-btn",onClick:s=>e.triggerDropdownRight(i,!t.showDropdown),type:"button"},[(0,s._)("img",{class:"dropdown-btn-img2",id:"dropdown-btn-img2-"+i,src:o,alt:""},null,8,T)],8,C),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e=>t.displayedName=e,readonly:"",class:"input item-swap2"},null,8,$),[[l.nr,t.displayedName]]),t.showDropdown&&e.recipientId&&e.visibleItemsListRight.length>0?((0,s.wg)(),(0,s.iD)("ul",L,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.visibleItemsListRight,((t,l)=>((0,s.wg)(),(0,s.iD)("li",{class:"dropdown-item",key:l,onClick:s=>e.selectItemRight(t,i)},[(0,s._)("div",A,[(0,s._)("img",{src:t.previewLink,alt:""},null,8,M)]),(0,s._)("div",R,(0,n.zw)(e.$localizeFilter("new_deal_collection_title")+' "'+t.name+'" №'+t.numberInCollection),1)],8,z)))),128))])):(0,s.kq)("",!0)])))),128)),e.exchangeAmount?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",U,(0,n.zw)(e.$localizeFilter("new_deal_add_NSC_expect"))+": ",1)),e.exchangeAmount?(0,s.kq)("",!0):(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:1,"onUpdate:modelValue":t[3]||(t[3]=t=>e.expectedAmount=t),type:"text",class:"expected-hide input usdt2"},null,512)),[[l.nr,e.expectedAmount]])])]),(0,s._)("button",{onClick:t[4]||(t[4]=t=>e.submitHandler()),type:"button",class:(0,n.C_)(["button",e.canMakeDeal?"active":"disabled"])},(0,n.zw)(e.$localizeFilter("new_deal_button")),3)]),e.showNewDealCreatedModal?((0,s.wg)(),(0,s.j4)(E,{key:0,onCloseModal:e.closeModals},null,8,["onCloseModal"])):(0,s.kq)("",!0)])}i(7658);var V=i(7389),B=i(9849),E=i(3356);const H=e=>((0,s.dD)("data-v-98fb16e8"),e=e(),(0,s.Cn)(),e),S={class:"wrapper"},Z={class:"modal-container"},J={class:"modal-content"},K=H((()=>(0,s._)("img",{src:E,alt:""},null,-1))),O=[K],Y={class:"content-wrap"},j={class:"modal-title"},P={class:"modal-text"};function G(e,t,i,l,o,a){return(0,s.wg)(),(0,s.iD)("div",S,[(0,s._)("div",{class:"blur",onClick:t[0]||(t[0]=t=>e.$emit("closeModal"))}),(0,s._)("div",Z,[(0,s._)("div",J,[(0,s._)("button",{class:"close-button",onClick:t[1]||(t[1]=t=>e.$emit("closeModal"))},O),(0,s._)("div",Y,[(0,s._)("h3",j,(0,n.zw)(e.$localizeFilter("congratulations")),1),(0,s._)("p",P,(0,n.zw)(e.$localizeFilter("new_deal_created_modal_text")),1)])])])])}var Q=(0,V.aZ)({props:{},computed:{}}),W=i(89);const X=(0,W.Z)(Q,[["render",G],["__scopeId","data-v-98fb16e8"]]);var ee=X,te=(0,V.aZ)({components:{NewDealCreatedModal:ee},data(){return{recipientId:null,expectedNFTItems:[{name:"",showDropdown:!1}],exchangeNFTItems:[{name:"",showDropdown:!1}],expectedAmount:null,exchangeAmount:null,collections:[],showDropdownLeft:!1,showDropdownRight:!1,itemsListLeft:[],itemsListRight:[],showNewDealCreatedModal:!1}},computed:{canMakeDeal(){let e=!1,t=!1;return this.recipientId&&(this.exchangeNFTItems.length>0?(""!==this.exchangeNFTItems[0].name||this.exchangeAmount)&&(e=!0):this.exchangeAmount&&(e=!0),this.expectedNFTItems.length>0?(""!==this.expectedNFTItems[0].name||this.expectedAmount)&&(t=!0):this.expectedAmount&&(t=!0)),t&&e},profile(){return this.$store.getters.profile},collectionsByUserId(){return this.$store.getters.collectionsByUserId||[]},visibleItemsListRight(){return this.itemsListRight.filter((e=>!this.expectedNFTItems.some((t=>t.nftId===e.nftId))))},visibleItemsListLeft(){return this.itemsListLeft.filter((e=>!this.exchangeNFTItems.some((t=>t.nftId===e.nftId))))}},watch:{recipientId(e,t){this.$nextTick((()=>{t!==e&&(this.itemsListRight=[],this.expectedNFTItems=[{name:"",showDropdown:!1}])}))},canMakeDeal(e,t){this.$nextTick((()=>{e!==t&&console.log("canMakeDeal",e)}))}},methods:{closeModals(){this.showNewDealCreatedModal=!1,this.$nextTick((()=>{this.$router.push("/cabinet/myNFTDeals?type=deals_outgoing")}))},async submitHandler(){const e=JSON.parse(JSON.stringify(this.exchangeNFTItems));""===e[e.length-1].name&&e.pop();const t=e.map((e=>e.nftId)),i=JSON.parse(JSON.stringify(this.expectedNFTItems));""===i[i.length-1].name&&i.pop();const s=i.map((e=>e.nftId));""===this.exchangeAmount&&(this.exchangeAmount=null),""===this.expectedAmount&&(this.expectedAmount=null);const n={toClientId:this.recipientId,fromNfts:t,fromAmount:this.exchangeAmount,toNfts:s,toAmount:this.expectedAmount};try{await this.$store.dispatch("createNftDeal",n),this.showNewDealCreatedModal=!0}catch(l){this.$error(l)}},async sendRequest(e){try{await this.$store.dispatch("getCollectionByUserId",{userId:e}),this.collectionsByUserId.forEach((e=>{e.items.forEach((t=>{t.isCollected&&(t.name=e.name,this.itemsListRight.push(t))}))}))}catch(t){this.$error(t)}},selectItemLeft(e,t){const i=(0,B.Z)("new_deal_collection_title")+' "'+e.name+'" №'+e.numberInCollection;this.exchangeNFTItems[t]={displayedName:i,...e,showDropdown:!1},t===this.exchangeNFTItems.length-1&&""!==this.exchangeNFTItems[this.exchangeNFTItems.length-1].name&&this.visibleItemsListLeft.length>0&&this.exchangeNFTItems.push({name:"",showDropdown:!1}),this.triggerDropdownLeft(t,!1)},selectItemRight(e,t){const i=(0,B.Z)("new_deal_collection_title")+' "'+e.name+'" №'+e.numberInCollection;this.expectedNFTItems[t]={displayedName:i,...e,showDropdown:!1},t===this.expectedNFTItems.length-1&&""!==this.expectedNFTItems[this.expectedNFTItems.length-1].name&&this.visibleItemsListRight.length>0&&this.expectedNFTItems.push({name:"",showDropdown:!1}),this.triggerDropdownRight(t,!1)},triggerDropdownLeft(e,t){this.exchangeNFTItems[e].showDropdown=t;let i=document.getElementById(`dropdown-btn-img-${e}`);i.style.transform=t?"rotate(90deg)":"rotate(-90deg)"},triggerDropdownRight(e,t){this.expectedNFTItems[e].showDropdown=t;let i=document.getElementById(`dropdown-btn-img2-${e}`);i.style.transform=t?"rotate(90deg)":"rotate(-90deg)"},async loadData(){try{const e={filter:"my",skip:0,limit:1e6},t=await this.$store.dispatch("getCollections",e);this.collections=t.collections,this.collections.forEach((e=>{e.items.forEach((t=>{t.isCollected&&(t.name=e.name,this.itemsListLeft.push(t))}))}))}catch(e){this.$error(e)}}},async mounted(){try{await this.loadData(),await this.$store.dispatch("getProfile")}catch(e){console.log(e)}}});const ie=(0,W.Z)(te,[["render",q],["__scopeId","data-v-27e1245a"]]);var se=ie},8900:function(e,t,i){e.exports=i.p+"img/arrow-right.6e080af5.svg"}}]);