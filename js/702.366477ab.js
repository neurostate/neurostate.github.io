"use strict";(self["webpackChunkneurostate_cabinet"]=self["webpackChunkneurostate_cabinet"]||[]).push([[702],{9702:function(e,l,a){a.r(l),a.d(l,{default:function(){return B}});var t=a(3396),s=a(7139);const i={class:"my-nft-deals"},d={class:"header_left"},c={class:"title"},o={class:"id-wrap"},n={class:"id-title"},r={class:"id-data"},g={class:"header_right"},p={key:0,class:"button"},u={key:1,class:"deals-list"};function _(e,l,a,_,y,h){const w=(0,t.up)("LargeToggle"),v=(0,t.up)("router-link"),m=(0,t.up)("Deal");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t._)("div",{class:(0,s.C_)(["deals_outgoing"===e.selectedDealType?"outgoing":"","header-wrap"])},[(0,t._)("div",d,[(0,t._)("div",c,(0,s.zw)(e.$localizeFilter("my_nft_deals_title")),1),(0,t._)("div",o,[(0,t._)("span",n,(0,s.zw)(e.$localizeFilter("your_id")),1),(0,t._)("span",r,(0,s.zw)(" "+e.profile?.id||0),1)])]),(0,t._)("div",g,[(0,t.Wm)(w,{title:null,variants:e.dealTypes,selected:e.selectedDealType,onToggle:e.toggle,class:"toggle"},null,8,["variants","selected","onToggle"])])],2),"deals_outgoing"===e.selectedDealType?((0,t.wg)(),(0,t.iD)("button",p,[(0,t.Wm)(v,{to:"/cabinet/newNFTDeal"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.$localizeFilter("new_deal")),1)])),_:1})])):(0,t.kq)("",!0),e.showDeals?((0,t.wg)(),(0,t.iD)("div",u,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.deals,((l,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"deal",key:a},[(0,t.Wm)(m,{profileId:e.profile?.id,dealOverride:l,selectedDealType:e.selectedDealType,onReloadData:e.reloadData},null,8,["profileId","dealOverride","selectedDealType","onReloadData"])])))),128))])):(0,t.kq)("",!0)])}var y=a(7389);const h={class:"large-toggle-block"},w={key:0,class:"title"},v={class:"large-toggle-container"};function m(e,l,a,i,d,c){return(0,t.wg)(),(0,t.iD)("div",h,[e.title?((0,t.wg)(),(0,t.iD)("label",w,(0,s.zw)(e.title),1)):(0,t.kq)("",!0),(0,t._)("div",v,[(0,t._)("div",{class:(0,s.C_)(["large-toggle left",0==e.value?"selected":"default"]),onClick:l[0]||(l[0]=l=>e.toggle(0))},[(0,t._)("label",{class:(0,s.C_)(["text",0==e.value?"selected":""])},(0,s.zw)(e.$localizeFilter(e.variants[0])),3)],2),(0,t._)("div",{class:(0,s.C_)(["large-toggle middle",1==e.value?"selected":"default"]),onClick:l[1]||(l[1]=l=>e.toggle(1))},[(0,t._)("label",{class:(0,s.C_)(["text",1==e.value?"selected":""])},(0,s.zw)(e.$localizeFilter(e.variants[1])),3)],2),(0,t._)("div",{class:(0,s.C_)(["large-toggle right",2==e.value?"selected":"default"]),onClick:l[2]||(l[2]=l=>e.toggle(2))},[(0,t._)("label",{class:(0,s.C_)(["text",2==e.value?"selected":""])},(0,s.zw)(e.$localizeFilter(e.variants[2])),3)],2)])])}var D=(0,y.aZ)({props:["title","variants","selected"],watch:{selected:function(e,l){null!=e&&void 0!=e&&(this.value=this.variants.indexOf(e))}},data:()=>({value:0}),methods:{toggle(e){this.value=e,this.$emit("toggle",Number(this.value))}}}),f=a(89);const T=(0,f.Z)(D,[["render",m],["__scopeId","data-v-2be3d5ce"]]);var k=T;const b={class:"header-wrap"},z={class:"deal-id"},$={key:0,class:"deal-date"},C={class:"exchange-wrap"},I={class:"sell-wrap"},x={class:"exchange-title"},F={class:"preview-wrap"},N={key:0,class:"wrap"},O=["src"],q={class:"buy-wrap"},A={class:"exchange-title"},S={class:"preview-wrap"},Z={key:0,class:"wrap"},H=["src"],J={key:1,class:"stamp"},j={class:"stamp-title"},K={class:"stamp-text"};function Y(e,l,a,i,d,c){return(0,t.wg)(),(0,t.iD)("div",{class:(0,s.C_)(["deal",e.deal.isInvalid&&"deals_executed"!==e.selectedDealType?" invalid-deal ":""])},[(0,t._)("div",b,[(0,t._)("span",z,(0,s.zw)(e.$localizeFilter("deal_number")+e.deal?.dealId),1),e.deal?.createdTimestamp?((0,t.wg)(),(0,t.iD)("span",$,(0,s.zw)(e.$dateTimeFilter(Number(e.deal?.createdTimestamp),"custom","dd.mm.yyyy HH:MM")),1)):(0,t.kq)("",!0)]),(0,t._)("div",C,[(0,t._)("div",I,[(0,t._)("span",x,(0,s.zw)("deals_executed"===e.selectedDealType?e.$localizeFilter("sold"):e.$localizeFilter("deal_type_title_1")),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.deal.sold,((l,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"exhange-data",key:a,style:(0,s.j5)(e.deal.isInvalid&&"deals_executed"!==e.selectedDealType?"color: #A8A8A8":"")},(0,s.zw)(a+1+". "+(l.collectionName?e.$localizeFilter("nft_from_collection")+' "'+l.collectionName+'"':e.formatAmount(l.amount))+" "+(l.numberInCollection?"№ "+l.numberInCollection:l.currencyCode)),5)))),128)),(0,t._)("div",F,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.deal.sold,((l,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"preview",key:a},[l.previewImage?((0,t.wg)(),(0,t.iD)("div",N,[l.previewImage?((0,t.wg)(),(0,t.iD)("img",{key:0,src:l.previewImage,alt:"",class:(0,s.C_)(["nft-img",l.ownerChanged&&"deals_executed"!==e.selectedDealType?" owner-changed ":""])},null,10,O)):(0,t.kq)("",!0),(0,t._)("span",{class:"index",style:(0,s.j5)(l.ownerChanged&&"deals_executed"!==e.selectedDealType?"opacity: 0.5":"")},(0,s.zw)(a+1),5)])):(0,t.kq)("",!0)])))),128))])]),(0,t._)("div",q,[(0,t._)("span",A,(0,s.zw)("deals_executed"===e.selectedDealType?e.$localizeFilter("bought"):e.$localizeFilter("deal_type_title_2")),1),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.deal.bought,((l,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"exhange-data",key:a,style:(0,s.j5)(e.deal.isInvalid&&"deals_executed"!==e.selectedDealType?"color: #A8A8A8":"")},(0,s.zw)(a+1+". "+(l.collectionName?e.$localizeFilter("nft_from_collection")+' "'+l.collectionName+'"':e.formatAmount(l.amount))+" "+(l.numberInCollection?"№ "+l.numberInCollection:l.currencyCode)),5)))),128)),(0,t._)("div",S,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.deal.bought,((l,a)=>((0,t.wg)(),(0,t.iD)("div",{class:"preview",key:a},[l.previewImage?((0,t.wg)(),(0,t.iD)("div",Z,[l.previewImage?((0,t.wg)(),(0,t.iD)("img",{key:0,src:l.previewImage,alt:"",class:(0,s.C_)(["nft-img",l.ownerChanged&&"deals_executed"!==e.selectedDealType?" owner-changed ":""])},null,10,H)):(0,t.kq)("",!0),(0,t._)("span",{class:"index",style:(0,s.j5)(l.ownerChanged&&"deals_executed"!==e.selectedDealType?"opacity: 0.5":"")},(0,s.zw)(a+1),5)])):(0,t.kq)("",!0)])))),128))])])]),"deals_executed"===e.selectedDealType||e.deal.isInvalid?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",{key:0,class:(0,s.C_)(["deals_outgoing"===e.selectedDealType?"outgoing":"","buttons-wrap"])},["deals_incoming"===e.selectedDealType?((0,t.wg)(),(0,t.iD)("button",{key:0,class:"btn btn-secondary",onClick:l[0]||(l[0]=l=>e.actionCancel(e.deal.dealId))},(0,s.zw)(e.$localizeFilter("deal_type_btn_2")),1)):(0,t.kq)("",!0),(0,t._)("button",{class:"btn btn-primary",onClick:l[1]||(l[1]=l=>e.action(e.deal.dealId))},(0,s.zw)("deals_incoming"===e.selectedDealType?e.$localizeFilter("deal_type_btn_1"):e.$localizeFilter("deal_type_btn_3")),1)],2)),"deals_executed"!==e.selectedDealType&&e.deal.isInvalid?((0,t.wg)(),(0,t.iD)("div",J,[(0,t._)("h5",j,(0,s.zw)(e.$localizeFilter("stamp_title")),1),(0,t._)("p",K,(0,s.zw)(e.$localizeFilter("stamp_text")),1)])):(0,t.kq)("",!0)],2)}var M=a(9849),W=(0,y.aZ)({props:{dealOverride:{type:Object,default:null},selectedDealType:{type:String,default:null},profileId:{type:Number,default:null}},data(){return{deal:{}}},methods:{formatAmount(e){return this.$utils.formatNumber(e/1e6,"en-US",0,6)},async actionCancel(e){try{await this.$store.dispatch("cancelNftDeal",{dealId:e}),this.$message((0,M.Z)("deal_canceled")),this.$emit("reloadData")}catch(l){console.log(l)}},async action(e){if("deals_incoming"===this.selectedDealType)try{await this.$store.dispatch("confirmNftDeal",{dealId:e}),this.$message((0,M.Z)("deal_confirmed")),this.$emit("reloadData")}catch(l){this.$message(l.message),console.log(l)}else if("deals_outgoing"===this.selectedDealType)try{await this.$store.dispatch("cancelNftDeal",{dealId:e}),this.$message((0,M.Z)("deal_canceled")),this.$emit("reloadData")}catch(l){console.log(l)}}},mounted(){if(this.deal=JSON.parse(JSON.stringify(this.dealOverride)),"deals_executed"===this.selectedDealType&&this.deal.fromClientId!==this.profileId){const e=JSON.parse(JSON.stringify(this.deal.bought)),l=JSON.parse(JSON.stringify(this.deal.sold));this.deal.bought=l,this.deal.sold=e}}});const L=(0,f.Z)(W,[["render",Y],["__scopeId","data-v-73e88fee"]]);var R=L,U=(0,y.aZ)({name:"MyNFTDeals",props:{dealTypeOverride:{type:String,default:null}},components:{LargeToggle:k,Deal:R},data:()=>({dealTypes:["deals_executed","deals_incoming","deals_outgoing"],selectedDealType:"deals_executed",showDeals:!0}),watch:{deals(e,l){e!==l&&(this.showDeals=!1,this.$nextTick((()=>{this.showDeals=!0})))}},computed:{profile(){return this.$store.getters.profile},deals(){return this.$store.getters.nftDeals||[]}},methods:{toggle(e){this.selectedDealType=this.dealTypes[e],this.$router.replace({query:{type:this.selectedDealType}}),this.loadData()},reloadData(){this.loadData()},async loadData(){const e=this.selectedDealType;try{await this.$store.dispatch("getNftDeals",{dealType:e.slice(6)})}catch(l){this.$error(l)}}},async mounted(){this.isMounted=!0,this.dealTypeOverride&&(this.selectedDealType=this.dealTypeOverride);try{await this.$store.dispatch("getProfile"),await this.loadData()}catch(e){console.log(e)}}});const P=(0,f.Z)(U,[["render",_],["__scopeId","data-v-064c3865"]]);var B=P}}]);