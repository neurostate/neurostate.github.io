"use strict";(self["webpackChunkneurostate_cabinet"]=self["webpackChunkneurostate_cabinet"]||[]).push([[330],{3327:function(t,e,o){o.r(e),o.d(e,{default:function(){return F}});o(7658);var s=o(3396),a=o(7139),i=o(5075),l=o(7886);const r=t=>((0,s.dD)("data-v-bf2069e4"),t=t(),(0,s.Cn)(),t),n={class:"login"},u={class:"form"},c={class:"form__header"},m={class:"login-from-socail-networks",style:"margin-top: 14px;"},d={class:"login-from-socail-networks__buttons"},p=r((()=>(0,s._)("img",{src:i,alt:"google"},null,-1))),g=[p],_=r((()=>(0,s._)("img",{src:l,alt:"google"},null,-1))),h=[_],f={class:"no-account"};function b(t,e,o,i,l,r){const p=(0,s.up)("CustomInput");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("form",u,[(0,s._)("div",c,(0,a.zw)(t.$localizeFilter("authorization")),1),(0,s.Wm)(p,{modelValue:t.email,errors:t.v$.email.$errors,title:t.$localizeFilter("your_email"),"onUpdate:modelValue":e[0]||(e[0]=e=>{t.email=e,t.v$.email.$touch()})},null,8,["modelValue","errors","title"]),(0,s.Wm)(p,{modelValue:t.password,errors:t.v$.password.$errors,title:t.$localizeFilter("your_password"),isPassword:!0,"onUpdate:modelValue":e[1]||(e[1]=e=>{t.password=e,t.v$.password.$touch()})},null,8,["modelValue","errors","title"]),(0,s._)("button",{class:"forgot-password",type:"button",onClick:e[2]||(e[2]=e=>t.$router.push("/resetPassword"))},(0,a.zw)(t.$localizeFilter("forgot_password")),1),(0,s._)("div",m,[(0,s._)("p",null,(0,a.zw)(t.$localizeFilter("login_from_socail_networks")),1),(0,s._)("div",d,[(0,s._)("button",{class:"login-from-socail-networks__button",onClick:e[3]||(e[3]=e=>t.thirdPartyAuth("google")),type:"button"},g),(0,s._)("button",{class:"login-from-socail-networks__button",onClick:e[4]||(e[4]=e=>t.thirdPartyAuth("yandex")),type:"button"},h)])]),(0,s._)("button",{type:"button",id:"submitButton",class:"button",onClick:e[5]||(e[5]=(...e)=>t.submitHandler&&t.submitHandler(...e))},(0,a.zw)(t.$localizeFilter("login")),1),(0,s._)("p",f,(0,a.zw)(t.$localizeFilter("no_account")),1),(0,s._)("button",{class:"register",type:"button",onClick:e[6]||(e[6]=e=>t.$router.push("/register"))},(0,a.zw)(t.$localizeFilter("register_2")),1)])])}var w=o(3053),$=o(9117),v=o(7389),y=o(9849),k=o(1101),z=(0,v.aZ)({components:{CustomInput:k.Z},data(){return{email:"",password:"",sponsorEmail:"official@neuro-state.com"}},setup(){return{v$:(0,w.ZP)()}},validations(){return{email:{required:$.BM.withMessage((0,y.Z)("field_must_not_be_empty"),$.C1),email:$.BM.withMessage((0,y.Z)("field_must_be_valid_email_address"),$.Do)},password:{required:$.BM.withMessage((0,y.Z)("field_must_not_be_empty"),$.C1)}}},methods:{thirdPartyAuth(t){delete localStorage.neurostateClientSession,delete localStorage.neurostateClientScope,delete localStorage.neurostateClientSessionExpireTimestamp,location.href=location.origin+"/auth/"+t+"?sponsorEmail="+this.sponsorEmail},async submitHandler(){if(this.v$.$touch(),this.v$.$error)return;const t=document.getElementById("submitButton");t.classList.add("button--loading");const e={email:this.email,password:this.password};try{await this.$store.dispatch("login",e),this.$gtag.event("login",{method:"Google"});const{scope:o,email:s}=await this.$store.dispatch("getProfile");setTimeout((()=>{t.classList.remove("button--loading"),"not_activated_client"==o?this.$router.push("/confirmEmail?email="+s):this.$router.push("/cabinet")}),1e3)}catch(o){setTimeout((()=>{this.$error(o),t.classList.remove("button--loading"),this.buttonKey+=1}),1e3)}},async mounted(){if(localStorage.getItem("sponsorReferralToken"))try{let{email:t}=await this.$store.dispatch("getEmailByReferralToken",localStorage.getItem("sponsorReferralToken"));this.sponsorEmail=t||"official@neuro-state.com"}catch(t){console.log(t),this.sponsorEmail="official@neuro-state.com"}}}}),C=o(89);const E=(0,C.Z)(z,[["render",b],["__scopeId","data-v-bf2069e4"]]);var F=E},5075:function(t,e,o){t.exports=o.p+"img/google.b2539a72.svg"},7886:function(t,e,o){t.exports=o.p+"img/yandex.7dc70f0f.svg"}}]);