"use strict";(self["webpackChunkneurostate_cabinet"]=self["webpackChunkneurostate_cabinet"]||[]).push([[895],{2895:function(e,t,s){s.r(t),s.d(t,{default:function(){return M}});s(7658);var n=s(3396),r=s(7139);const i={class:"container"},o={class:"activate"},a={class:"title"},c=["innerHTML"],l={class:"text resend_text"},u={class:"timer"};function m(e,t,s,m,d,p){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",o,[(0,n._)("button",{type:"button",class:"close-btn",onClick:t[0]||(t[0]=t=>e.$router.push("/login"))}),(0,n._)("p",a,(0,r.zw)(e.$localizeFilter("account_activation")),1),(0,n._)("p",{class:"text",innerHTML:e.$localizeFilter("activate_account_text",[e.email])},null,8,c),(0,n._)("p",l,(0,r.zw)(e.$localizeFilter("resend_email")),1),(0,n._)("div",u,(0,r.zw)(`${e.resultMinutes}:${e.resultSeconds}`),1),(0,n._)("button",{class:"button",onClick:t[1]||(t[1]=t=>e.resend())},(0,r.zw)(e.$localizeFilter("resend")),1)])])}var d=s(7389),p=s(4870);
/*!
  * vue-timer-hook v1.0.72
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */
class v{static getTimeFromSeconds(e){const t=(0,n.Fl)((()=>Math.ceil(e.value))),s=(0,n.Fl)((()=>Math.floor(t.value/86400))),r=(0,n.Fl)((()=>Math.floor(t.value%86400/3600))),i=(0,n.Fl)((()=>Math.floor(t.value%3600/60))),o=(0,n.Fl)((()=>Math.floor(t.value%60)));return{seconds:o,minutes:i,hours:r,days:s}}static getSecondsFromExpiry(e,t){const s=(new Date).getTime(),n=e-s;if(n>0){const e=n/1e3;return t?Math.round(e):e}return 0}static getSecondsFromPrevTime(e,t){const s=(new Date).getTime(),n=s-e;if(n>0){const e=n/1e3;return t?Math.round(e):e}return 0}static getSecondsFromTimeNow(){const e=new Date,t=e.getTime(),s=60*e.getTimezoneOffset();return t/1e3-s}static getFormattedTimeFromSeconds(e,t){const{seconds:s,minutes:r,hours:i}=v.getTimeFromSeconds(e),o=(0,n.Fl)((()=>"12-hour"===t?i.value>=12?"pm":"am":"")),a=(0,n.Fl)((()=>"12-hour"===t?i.value%12:i.value));return{seconds:s,minutes:r,hours:a,ampm:o}}}class g{static expiryTimestamp(e){const t=new Date(e).getTime()>0;return t||console.warn("vue-timer-hook: { useTimer } Invalid expiryTimestamp settings",e),t}}const h=e=>"number"===typeof e;function y(e,t){let s;const n=()=>{s&&(clearInterval(s),s=void 0)},r=r=>{if(n(),!r&&!t)return;const i=r||t;return s=setInterval(e,i)};return h(t)&&r(),{remove:n,start:r}}const f=1e3;function T(e){if(!g.expiryTimestamp(e))return null;const t=v.getSecondsFromExpiry(e),s=Math.floor(1e3*(t-Math.floor(t)));return s>0?s:f}const S=(e=60,t=!0)=>{let s;const n=(0,p.qj)({expiryTimestamp:e,seconds:v.getSecondsFromExpiry(e),isRunning:t,isExpired:!1,didStart:t,delay:T(e)});function r(){n.isExpired=!0,n.isRunning=!1,n.delay=null,s&&s.remove()}function i(){n.isRunning=!1,s&&s.remove()}function o(t=e,s=!0){i(),n.delay=T(t),n.didStart=s,n.isExpired=!1,n.expiryTimestamp=t,n.seconds=v.getSecondsFromExpiry(t),n.didStart&&c()}function a(){const e=new Date,t=e.setMilliseconds(e.getMilliseconds()+1e3*n.seconds);o(t)}function c(){n.didStart?(n.seconds=v.getSecondsFromExpiry(n.expiryTimestamp),n.isRunning=!0,s=y((()=>{n.delay!==f&&(n.delay=f);const e=v.getSecondsFromExpiry(n.expiryTimestamp);n.seconds=e,e<=0&&r()}),n.isRunning?n.delay:null)):a()}return o(e,t),{...v.getTimeFromSeconds((0,p.Vh)(n,"seconds")),start:c,pause:i,resume:a,restart:o,isRunning:(0,p.Vh)(n,"isRunning"),isExpired:(0,p.Vh)(n,"isExpired")}};var F=(0,d.aZ)({props:{email:{type:String,required:!0}},setup(){let e=new Date,t=10;localStorage.getItem("resendEmailTimer")?e=new Date(+localStorage.getItem("resendEmailTimer")):(e.setMinutes(e.getMinutes()+t),localStorage.setItem("resendEmailTimer",+e));const s=S(e);(0,n.bv)((()=>{(0,n.m0)((async()=>{if(s.isExpired.value){const e=document.querySelector(".button");e.classList.add("active")}}))}));const r=(0,n.Fl)((()=>s.minutes.value<10?`0${s.minutes.value}`:s.minutes.value)),i=(0,n.Fl)((()=>s.seconds.value<10?`0${s.seconds.value}`:s.seconds.value));return{resultMinutes:r,resultSeconds:i,timer:s}},data(){return{}},async mounted(){try{const e=await this.$store.dispatch("getProfile");"client"==e.scope&&this.$router.push("/cabinet")}catch(e){this.$error(e)}},methods:{async resend(){try{await this.$store.dispatch("resendConfirmationEmail"),localStorage.removeItem("resendEmailTimer");let e=document.querySelector(".button");e.classList.remove("active"),this.restartTimer()}catch(e){const t=document.querySelector(".button");t.classList.add("active"),this.$error(e)}},restartTimer(){let e=new Date,t=10;e.setMinutes(e.getMinutes()+t),localStorage.setItem("resendEmailTimer",+e),this.timer.restart(e)}}}),x=s(89);const w=(0,x.Z)(F,[["render",m],["__scopeId","data-v-56b92096"]]);var M=w}}]);