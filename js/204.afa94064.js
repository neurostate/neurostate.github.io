"use strict";(self["webpackChunkneurostate_cabinet"]=self["webpackChunkneurostate_cabinet"]||[]).push([[204],{3660:function(t,l,o){o.r(l),o.d(l,{default:function(){return kt}});var e=o(3396),n=o(7139),s=o(7650);const i=t=>((0,e.dD)("data-v-6c667802"),t=t(),(0,e.Cn)(),t),a={class:"nft-bonuses"},r={class:"header-wrap"},c={class:"header_left"},d={class:"title"},u={class:"id-wrap"},h={class:"id-title"},p={class:"id-data"},w={class:"header_right"},g={class:"btns-wrap"},f={class:"my-button"},C={class:"collection-title-block"},m={class:"all",id:"anchor"},y={class:"my-button"},_={class:"buttons-wrap"},v=i((()=>(0,e._)("img",{src:s,alt:""},null,-1))),b=[v];function S(t,l,o,s,i,v){const S=(0,e.up)("router-link"),M=(0,e.up)("LotterySpinning"),k=(0,e.up)("NFTBonusesDesktop"),$=(0,e.up)("NFTBonusesTablet"),I=(0,e.up)("pagination"),x=(0,e.up)("CongratulationModal"),F=(0,e.up)("LotteryInfoModal"),z=(0,e.up)("FullCollectionInfoModal");return(0,e.wg)(),(0,e.iD)("div",a,[(0,e._)("div",r,[(0,e._)("div",c,[(0,e._)("div",d,(0,n.zw)(t.$localizeFilter("nft_bonus_btn")),1),(0,e._)("div",u,[(0,e._)("span",h,(0,n.zw)(t.$localizeFilter("your_id")),1),(0,e._)("span",p,(0,n.zw)(" "+t.profile?.id||0),1)])]),(0,e._)("div",w,[(0,e._)("div",g,[(0,e.Wm)(S,{to:"/cabinet/myNFTDeals"},{default:(0,e.w5)((()=>[(0,e._)("button",f,(0,n.zw)(t.$localizeFilter("my_nft_deals_title")),1)])),_:1})])])]),t.notCollected.length>0?((0,e.wg)(),(0,e.j4)(M,{key:0,ref:"lotterySpinningRef",id:"lotterySpinningId",onShowLotteryInfoModal:l[0]||(l[0]=l=>t.showLotteryInfoModal=!0),onShowCongratulationModal:t.showCongratulationModal2,notCollected:t.notCollected,trialsCountOverride:t.trialsCount,onUpdateNotCollected:t.updateNotCollected},null,8,["onShowCongratulationModal","notCollected","trialsCountOverride","onUpdateNotCollected"])):(0,e.kq)("",!0),(0,e._)("div",C,[(0,e._)("p",m,(0,n.zw)(t.$localizeFilter("all_collections_title")),1),(0,e._)("button",y,[(0,e.Wm)(S,{to:"/cabinet/myNFTBonuses"},{default:(0,e.w5)((()=>[(0,e.Uk)((0,n.zw)(t.$localizeFilter("my_collections_title")),1)])),_:1})])]),(0,e.Wm)(k,{collections:t.collections,class:"desktop",onShowFullCollectionInfoModal:t.openFullCollectionInfoModal},null,8,["collections","onShowFullCollectionInfoModal"]),(0,e.Wm)($,{collections:t.collections,class:"tablet",onShowFullCollectionInfoModal:t.openFullCollectionInfoModal},null,8,["collections","onShowFullCollectionInfoModal"]),(0,e._)("div",_,[(0,e.Wm)(I,{modelValue:t.page,"onUpdate:modelValue":l[1]||(l[1]=l=>t.page=l),records:t.count,"per-page":t.pageSize,onClick:t.scrollToTop},null,8,["modelValue","records","per-page","onClick"]),t.notCollected.length>0?((0,e.wg)(),(0,e.iD)("button",{key:0,class:"button",onClick:l[2]||(l[2]=l=>t.scrollToTop())},(0,n.zw)(t.$localizeFilter("go_to_nft_btn")),1)):(0,e.kq)("",!0)]),(0,e._)("button",{class:"leave-session",onClick:l[3]||(l[3]=l=>t.logout())},(0,n.zw)(t.$localizeFilter("leave_session")),1),(0,e._)("div",{class:"scroll-up-btn",onClick:l[4]||(l[4]=l=>t.scrollUp())},b),t.showCongratulationModal?((0,e.wg)(),(0,e.j4)(x,{key:1,collections:t.collections,winSlot:t.winSlot,onCloseModal:t.closeModals},null,8,["collections","winSlot","onCloseModal"])):(0,e.kq)("",!0),t.showLotteryInfoModal?((0,e.wg)(),(0,e.j4)(F,{key:2,onCloseModal:t.closeModals},null,8,["onCloseModal"])):(0,e.kq)("",!0),t.showFullCollectionInfoModal?((0,e.wg)(),(0,e.j4)(z,{key:3,reward:t.selectedCollectionReward,onCloseModal:t.closeModals},null,8,["reward","onCloseModal"])):(0,e.kq)("",!0)])}o(7658);var M=o(7389),k=o(4451);const $=t=>((0,e.dD)("data-v-6bd7afe6"),t=t(),(0,e.Cn)(),t),I={class:"wrapper"},x={class:"title"},F={key:0,class:"roulette-wrapper"},z={ref:"wheel",class:"wheel"},D=["src"],L=["src"],N={class:"attempts"},q=$((()=>(0,e._)("img",{src:k,alt:""},null,-1))),T=[q],R=$((()=>(0,e._)("input",{style:{visibility:"hidden"},placeholder:"outcome"},null,-1)));function W(t,l,o,s,i,a){return(0,e.wg)(),(0,e.iD)("div",I,[(0,e._)("h3",x,(0,n.zw)(t.$localizeFilter("try_your_luck")),1),t.notCollected.length>0?((0,e.wg)(),(0,e.iD)("div",F,[(0,e._)("div",z,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.totalRows,((l,o)=>((0,e.wg)(),(0,e.iD)("div",{class:"row",key:o},[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.notCollected,((t,l)=>((0,e.wg)(),(0,e.iD)("div",{class:"card",key:l},[(0,e._)("img",{class:"img",src:t.previewLink,alt:""},null,8,D)])))),128)),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(t.notCollected,((t,l)=>((0,e.wg)(),(0,e.iD)("div",{class:"card",key:l},[(0,e._)("img",{class:"img",src:t.previewLink,alt:""},null,8,L)])))),128))])))),128))],512)])):(0,e.kq)("",!0),(0,e._)("p",N,[(0,e._)("button",{onClick:l[0]||(l[0]=l=>t.$emit("showLotteryInfoModal"))},T),(0,e.Uk)(" "+(0,n.zw)(t.$localizeFilter("attempts")+": "+t.trialsCount),1)]),(0,e._)("div",null,[R,((0,e.wg)(),(0,e.iD)("button",{class:(0,n.C_)(0===t.trialsCount?"button button-disabled":"button"),onClickOnce:l[1]||(l[1]=l=>t.startSpin()),key:t.buttonKey},(0,n.zw)(t.$localizeFilter("go_to_nft_btn")),35))])])}async function B(t=0){return new Promise(((l,o)=>{setTimeout((()=>{l(null)}),t)}))}var E=(0,M.aZ)({name:"LotterySpinning",props:{notCollected:{type:Array,default:()=>[]},trialsCountOverride:{type:Number,default:0}},data(){return{trialsCount:0,totalRows:15,items:[],buttonKey:0,cards:0,interval:null,latestPosition:null}},watch:{trialsCountOverride:function(t){this.trialsCount=t}},computed:{},methods:{transformCards(){let t=document.querySelector(".roulette-wrapper").offsetWidth,l=document.querySelector(".roulette-wrapper").getBoundingClientRect(),o=t/2+l.x,e=document.querySelectorAll(".card");e.forEach((t=>{let l=t.getBoundingClientRect().x+t.offsetWidth/2,e=Math.abs(l-o);e<110&&(t.style.transform=`scale(${1+(110-e)/400})`,t.style.marginLeft=23+(110-e)/4+"px",t.style.marginRight=40+(110-e)/4+"px")}))},async startSpin(){if(this.trialsCount>0){const l=await this.$store.dispatch("spinNFTWheel")||"";var t=null;let o=this.notCollected.find((t=>t.nftId===l.nftId));console.log("check",o,l,this.notCollected),void 0===o&&this.$emit("updateNotCollected",l,this.latestPosition),await B(500),this.notCollected.forEach(((o,e)=>{o.nftId===l.nftId&&(t=e+1)})),this.spinWheel(t,l),this.interval=setInterval((()=>{let t=document.querySelector(".roulette-wrapper").offsetWidth,l=document.querySelector(".roulette-wrapper").getBoundingClientRect(),o=t/2+l.x,e=document.querySelectorAll(".card");e.forEach((t=>{let l=t.getBoundingClientRect().x+t.offsetWidth/2,e=Math.abs(l-o);e<110?(t.style.transform=`scale(${1+(110-e)/400})`,t.style.marginLeft=20+(110-e)/4+"px",t.style.marginRight=20+(110-e)/4+"px"):(t.style.transform="scale(1)",t.style.marginLeft="20px",t.style.marginRight="20px")}))}),16),this.trialsCount--}},hideShadow(){let t=document.querySelectorAll(".card");t.forEach((t=>{t.firstChild.style.boxShadow="none"}))},spinWheel(t,l){var o=document.querySelector(".roulette-wrapper .wheel");let e=[];for(let p=1;p<=this.notCollected.length;p++)e.push(p);let n=e.indexOf(t);this.latestPosition=n;const s=186,i=20,a=20,r=20;var c=7,d=s+2*i,u=c*this.notCollected.length*d+n*d+a+r;let h;o.style.transitionTimingFunction="cubic-bezier(0,0.12,0.14,1)",o.style.transitionDuration="6s",o.style.transform="translate3d(-"+(u-24)+"px, 0px, 0px)",this.$refs.wheel.addEventListener("transitionend",h=async()=>{this.$refs.wheel.removeEventListener("transitionend",h),o.style.transition="all 0.5s ease-in-out",o.style.transform="translate3d(-"+(u-r-33)+"px, 0px, 0px)",await B(300),clearInterval(this.interval),this.interval=null,o.style.transitionDuration="",o.style.transition="";var t=-n*d-r;o.style.transform="translate3d("+(t+24)+"px, 0px, 0px)",this.buttonKey++;let e=document.querySelector(".roulette-wrapper").offsetWidth,s=document.querySelector(".roulette-wrapper").getBoundingClientRect(),i=e/2+s.x,a=document.querySelectorAll(".card");a.forEach((t=>{let l=t.getBoundingClientRect().x+t.offsetWidth/2,o=Math.abs(l-i);o<110?(t.style.transform=`scale(${1+(110-o)/400})`,t.style.marginLeft=23+(110-o)/4+"px",t.style.marginRight=23+(110-o)/4+"px",t.firstChild.style.boxShadow="0px 0px 20px #78ECE3"):(t.style.transform="scale(1)",t.style.marginLeft="20px",t.style.marginRight="20px")})),await B(1e3),this.$emit("showCongratulationModal",l)})}},mounted(){this.trialsCount=this.trialsCountOverride,this.notCollected.length>0&&this.transformCards()}}),O=o(89);const Z=(0,O.Z)(E,[["render",W],["__scopeId","data-v-6bd7afe6"]]);var A=Z,P=o(5695),U=o(7039),K=o(3356);const j=t=>((0,e.dD)("data-v-65313616"),t=t(),(0,e.Cn)(),t),V={class:"wrapper"},Y={class:"modal-container"},H={class:"modal-content"},J=j((()=>(0,e._)("img",{src:K,alt:""},null,-1))),G=[J],Q={class:"content-wrap"},X={class:"modal-title"},tt={class:"modal-text"},lt=["src"],ot={class:"info-wrap"},et={class:"info-text"},nt={class:"info-text"};function st(t,l,o,s,i,a){return(0,e.wg)(),(0,e.iD)("div",V,[(0,e._)("div",{class:"blur",onClick:l[0]||(l[0]=l=>t.$emit("closeModal"))}),(0,e._)("div",Y,[(0,e._)("div",H,[(0,e._)("button",{class:"close-button",onClick:l[1]||(l[1]=l=>t.$emit("closeModal"))},G),(0,e._)("div",Q,[(0,e._)("h3",X,(0,n.zw)(t.$localizeFilter("congratulations")),1),(0,e._)("p",tt,(0,n.zw)(t.$localizeFilter("your_prize")+'"'+t.winSlotCollectionName+'"'),1),(0,e._)("img",{src:t.winSlot.previewLink||"",alt:"",class:"prize-img"},null,8,lt),(0,e._)("div",ot,[(0,e._)("p",et,(0,n.zw)(t.$localizeFilter("your_prize_sent")+" "+(t.profile?.email||"")),1),(0,e._)("p",nt,(0,n.zw)(t.$localizeFilter("your_progress_displayed")),1)])])])])])}o(9849);var it=(0,M.aZ)({props:{winSlot:{type:Object},collections:{type:Array}},computed:{winSlotCollectionName(){return this.winSlot.collectionName+" "+this.winSlot.numberInCollection+"/"+this.winSlot.itemsInCollectionCount},profile(){return this.$store.state.profile}},async mounted(){try{await this.$store.dispatch("getProfile")}catch(t){console.log(t)}}});const at=(0,O.Z)(it,[["render",st],["__scopeId","data-v-65313616"]]);var rt=at;const ct=t=>((0,e.dD)("data-v-3da27001"),t=t(),(0,e.Cn)(),t),dt={class:"wrapper"},ut={class:"modal-container"},ht={class:"modal-content"},pt=ct((()=>(0,e._)("img",{src:K,alt:""},null,-1))),wt=[pt],gt={class:"content-wrap"},ft={class:"modal-text"};function Ct(t,l,o,s,i,a){return(0,e.wg)(),(0,e.iD)("div",dt,[(0,e._)("div",{class:"blur",onClick:l[0]||(l[0]=l=>t.$emit("closeModal"))}),(0,e._)("div",ut,[(0,e._)("div",ht,[(0,e._)("button",{class:"close-button",onClick:l[1]||(l[1]=l=>t.$emit("closeModal"))},wt),(0,e._)("div",gt,[(0,e._)("p",ft,(0,n.zw)(t.$localizeFilter("lottery_info_text")),1)])])])])}var mt=(0,M.aZ)({computed:{profile(){return this.$store.state.profile}},async mounted(){try{await this.$store.dispatch("getProfile")}catch(t){console.log(t)}}});const yt=(0,O.Z)(mt,[["render",Ct],["__scopeId","data-v-3da27001"]]);var _t=yt,vt=o(8845),bt=o(4268);var St=(0,M.aZ)({name:"NFTBonuses",mixins:[bt.Z],components:{LotterySpinning:A,NFTBonusesDesktop:P.Z,NFTBonusesTablet:U.Z,CongratulationModal:rt,LotteryInfoModal:_t,FullCollectionInfoModal:vt.Z},data(){return{collections:[],notCollected:[],trialsCount:0,winSlot:{},count:0,showCongratulationModal:!1,showLotteryInfoModal:!1,showFullCollectionInfoModal:!1,selectedCollectionReward:{}}},watch:{page(){this.$nextTick((()=>{let t=document.getElementById("anchor");t.scrollIntoView({behavior:"smooth"}),this.loadData()}))}},computed:{profile(){return this.$store.getters.profile},referralsCounts(){let t=[],l=0;for(let o of this.list)t.push({from:l+1,to:l+o.length}),l+=o.length;return t}},created(){window.addEventListener("scroll",this.handleScroll)},unmounted(){window.removeEventListener("scroll",this.handleScroll)},methods:{scrollToTop(){let t=document.getElementById("lotterySpinningId");t.scrollIntoView({behavior:"smooth"})},async getNotCollected(t=null,l=null){let o=[];if(t){o=JSON.parse(JSON.stringify(this.notCollected)),o=o.slice(0,29);let l=o.length/2;o.splice(l,0,t)}else try{o=await this.$store.dispatch("getNftWheelOptions")}catch(e){console.log(e)}this.notCollected=o},updateNotCollected(t,l){this.getNotCollected(t,l)},showCongratulationModal2(t){this.winSlot=t,this.showCongratulationModal=!0},openFullCollectionInfoModal(t){this.selectedCollectionReward=t,this.showFullCollectionInfoModal=!0},closeModals(){this.showCongratulationModal&&this.reloadData(),this.showCongratulationModal=!1,this.showLotteryInfoModal=!1,this.showFullCollectionInfoModal=!1},handleScroll(t){window.pageYOffset>100?document.querySelector(".scroll-up-btn").style.display="block":document.querySelector(".scroll-up-btn").style.display="none"},scrollUp(){window.scrollTo({top:0,behavior:"smooth"})},openTable(t){const l=document.querySelectorAll(".table")[t];l.classList.toggle("open");const o=document.querySelectorAll(".open-list")[t];o.classList.toggle("arrow-up")},async logout(){try{await this.$store.dispatch("logout")}catch(t){console.log(t)}finally{location.href=`${location.origin}/`}},async reloadData(){this.notCollected=[],this.loadData(!0)},async loadData(t=!1){try{t&&this.getNotCollected();const l={skip:this.skip,limit:this.limit,filter:"all"},o=await this.$store.dispatch("getCollections",l),{count:e}=await this.$store.dispatch("getCollectionsCount",l);this.count=e,this.trialsCount=o.trialsCount,this.collections=o.collections,this.setupPagination(this.collections,this.count)}catch(l){this.$error(l)}}},async mounted(){try{await this.loadData(!0),await this.$store.dispatch("getProfile")}catch(t){console.log(t)}}});const Mt=(0,O.Z)(St,[["render",S],["__scopeId","data-v-6c667802"]]);var kt=Mt}}]);